<div>
	<div class="row-fluid">
		<div>
			<div>
				<h3 class="text-center"> All Test Status </h3>
			</div>
			<div style="overflow: scroll">
				<table width=100% id="all_test_table" class="display table table-striped table-bordered table-hover table-condensed">
					<thead class="dataTableHeader">
						<tr>
							<th>Test Id</th>
							<th>Test Name</th>     
							<th>Category</th>     
							<th>Scheduled By</th>     
							<th>Test Status</th>
							<th>Total Tests</th>
							<th>No of Test Passed</th>
							<th>No of Test Failed</th>
							<th>Scheduled Time</th>     
							<th>Completed Time</th>     
						</tr>
					</thead>
				</table>
			</div>
		</div
	</div>
</div>
<script>
(function(httpCompliance, $, undefined){

	httpCompliance.AllTestViewModel = function AllTestViewModel(data){
		var self = this;
		
		self.formatTableData = function formatTableData(test){
         	return [
                ['<a href= "#/test_details/' + test.id +'"> <span>' + test.id + '</span></a>',
                test.name,
                test.category,
                test.scheduled_by,
                test.status,
                test.total_test_count,
                test.pass_count,
                test.fail_count,
                test.created_time,
                test.completed_time]
            ]
    	} 
		
		self.tests = ko.observableArray( $.map(data.tests || [], function(test){
			return self.formatTableData(test);
		} ));
		
		self.initDataTable = function initDataTable(){
			var options = {
				"bJQueryUI": true,
				aoColumns: [ {
								"sType": "numeric"
						},
						null,
						null,
						null,
						null,
						null,
						null,
						null,
						null,
						null
					],
				aaData: self.tests()
			}
			Application.dataTable.Init("#all_test_table", options, true);
    	}
		
		self.test_total_status = ko.computed(function(){
			if (self.status === "Pending"){
				return "warning";
			}
			if (self.fail_count ) {
				return "error";
			}
			if ( self.total_test_count === self.pass_count ){
				return "success";
			}
		})
		self.initDataTable()
	}
}(Application.namespace("Application.httpCompliance"), jQuery))

var applyFormBindings = function(data, tab_id){
	ko.applyBindings(new Application.httpCompliance.AllTestViewModel(data), $(tab_id)[0]);
};

</script>
